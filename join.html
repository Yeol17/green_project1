<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>under70</title>

  <!-- RESET -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reset-css@5.0.1/reset.min.css">

  <!-- FONTS & ICONS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <!-- CSS -->
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/join.css">

  <script src="js/common.js" defer></script>
<body>
  <div class="wrap">
    <!--HEADER-->
    <div class="header_wrap">
      <div class="header_bg"></div>
    
      <header id="header" class="header">

        <div class="header-inner">

          <h1 class="logo"><a href="index.html">언더70</a></h1>
          
          <nav class="gnb">

            <h2 class="hide">주요메뉴</h2>
            <ul class="main_menu">
              <li><a href="index.html">HOME</a></li>
              <li><a href="#none">NEW</a></li>
              <li><a href="#none">BEST</a></li>
              <li>
                <a href="#none">PRODUCT</a>
                <div class="sub-wrap">
                  <ul class="sub_menu">
                    <li>
                      <h3>PRODUCT</h3>
                    </li>
                    <li class="flex_box">
                      <ul>
                        <li><a href="#" class="category mgbt10">아우터</a></li>
                        <li><a href="#" class="category">상의</a></li>
                        <li><a href="#">긴팔</a></li>
                        <li><a href="#">반팔</a></li>
                        <li><a href="#">스웻셔츠</a></li>
                        <li><a href="#">후드티</a></li>
                        <li><a href="#">셔츠</a></li>
                        <li><a href="#" class="mgbt10">니트</a></li>
                      </ul>
                      <ul>
                        <li><a href="#" class="category">신발</a></li>
                        <li><a href="#" class="category">하의</a></li>
                        <li><a href="#">청바지</a></li>
                        <li><a href="#">면바지</a></li>
                        <li><a href="#">슬랙스</a></li>
                        <li><a href="#">와이드핏</a></li>
                        <li><a href="#" class="mgbt10">밴딩팬츠</a></li>
                        <li><a href="#" class="category">악세사리</a></li>
                      </ul>
                    </li>
                    <li class="sub_menu_bg"></li>
                  </ul>
                </div>
              </li>
              <li><a href="#none">LOOKBOOK</a></li>
              <li><a href="#none">Q/A</a></li>
              <li><a href="#none">REVIEW</a></li>
            </ul>

          </nav>


          <div class="utill_menu">
            <h2 class="hide">유틸메뉴</h2>
            <ul>
              <li>
                <a href="#none">
                  <span class="material-symbols-outlined">search</span>
                </a>
              </li>
              <li><a href="login.html">로그인</a></li>
              <li><a href="join.html">회원가입</a></li>
              <li><a href="#none"><span class="like">좋아요</span></a></li>
              <li><a href="#none">장바구니</a></li>
            </ul>
          </div>
        </div>
      </header>
    
    </div>
    <!-- <div class="shadow-effect"></div> -->
    
    <!--CONTENT-->
    <main id="main" class="content">

      <section class="join">

        <h2 class="join_logo">회원 가입</h2> 
        <form action="index.html" method="get"  autocomplete="off">

          <div class="membership_join_id">
            <label for="user-id">
              <p class="necessary">아이디</p>
            </label>
              <div class="input-wrap">
                <input type="text" id="user-id"  placeholder="영문, 숫자 5-11 자" maxlength="11">
                <span class="material-symbols-outlined clear-btn id-clear">cancel</span>
                <div class="err-id err"></div>
              </div>
          </div>
          <div class="membership_join_pw">
            <label for="user-pw">
              <p class="necessary">비밀번호</p>
            </label>
            <div class="input-wrap">
              <span class="material-symbols-outlined pw-visible_off">visibility_off</span>
              <span class="material-symbols-outlined pw-visible">visibility</span>
              <input type="password" maxlength="30" placeholder="숫자, 영문, 특수문자 조합 최소8자" id="user-pw">
              <span class="material-symbols-outlined clear-btn pw-clear">cancel</span>
              <div class="err-pw err"></div>
            </div>
            <div class="input-wrap">
              <span class="material-symbols-outlined check-visible_off">visibility_off</span>
              <span class="material-symbols-outlined check-visible">visibility</span>
              <input type="password" maxlength="30" id="pw-check" placeholder="비밀번호 재입력" >
              <span class="material-symbols-outlined clear-btn check-clear">cancel</span>
              <div class="pw-check-msg"></div>
            </div>
          </div>
          <div class="membership_join_mail">
            <label for="user-email">
              <p class="necessary">이메일</p>
            </label>
            <div class="input-wrap">
              <input type="text" id="user-email">
              <span class="material-symbols-outlined clear-btn email-clear">cancel</span>
              <div class="err-email"></div>
            </div>
          </div>  
          <div class="membership_policy_agreement flex_box">
              <div class="policy_all_agreement flex_box">
                <input type="checkbox" name="policy" id="policy_all">
                <label for="policy_all">
                  약관 전체 동의하기
                </label>
              </div>
              <div class="privacy_agreement flex_box">
                <input type="checkbox" name="policy" id="privacy">
                <label for="privacy">
                  [필수] 개인정보 수집 및 이용 동의
                </label>
                <button class="join_checkbox_link" type="button">자세히</button>
              </div>
              <div class="site_use_agreement flex_box">
                <input type="checkbox" name="policy" id="site_use">
                <label for="site_use">
                  [필수] 언더70 이용약관
                </label>
                <button class="join_checkbox_link" type="button">자세히</button>
              </div>
              <div class="join_age_agreement flex_box">
                <input type="checkbox" name="policy" id="join_age">
                <label for="join_age">
                  [필수] 만 14세 미만 가입제한
                </label>
              </div>
              <div class="marketing_agreement flex_box">
                <input type="checkbox" name="policy" id="marketing">
                <label for="marketing">
                  [선택] 마케팅 활용 및 광고성 정보 수신 동의
                </label>
                <button class="join_checkbox_link" type="button">자세히</button>
              </div>
          </div>
          <button type="click"  class="joinus" disabled>가입하기</button>
        </form>

        
      </section>

    </main>
      <script>
        let $userId = document.getElementById('user-id');
        let $idClear = document.querySelector('.membership_join_id .clear-btn');
        let $errId = document.querySelector('.err-id');
        let $userPw = document.getElementById('user-pw');
        let $pwClear = document.querySelector('.pw-clear');
        let $pwVisible = document.querySelector('.pw-visible');
        let $pwVisibleOff = document.querySelector('.pw-visible_off');
        let $errPw = document.querySelector('.err-pw');
        let $checkClear = document.querySelector('.check-clear');
        let $pwCheck = document.getElementById('pw-check');
        let $checkVisible = document.querySelector('.check-visible');
        let $checkVisibleOff = document.querySelector('.check-visible_off');
        let $pwCheckMsg = document.querySelector('.pw-check-msg');
        let $userEmail = document.getElementById('user-email');
        let $emailClear = document.querySelector('.email-clear');
        let $errEmail = document.querySelector('.err-email');
        let $policyAll = document.getElementById('policy_all');
        let checkboxes = document.querySelectorAll('input[type="checkbox"]');
        let $joinUs = document.querySelector('.joinus');
        // 약관 동의
        let $joinAge = document.getElementById('join_age');
        let $privacy = document.getElementById('privacy');
        let $siteUse = document.getElementById('site_use');
        let $marketing = document.getElementById('marketing');
        
        let flagId, flagPw, flagEmail, flagPolicy = false;

        let ptnId = /^[a-z0-9]{5,11}$/g;
        let ptnPw = /^(?=.*?[0-9])(?=.*?[#?!@$ %^&*-]).{8,}$/;
        let ptnEmail = /([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;

        function btnAble() {
          if (flagId && flagPw && flagEmail && flagPolicy) {
            $joinUs.removeAttribute('disabled');
            $joinUs.classList.add('clickable');
            return;
          } 
          if (!(flagId && flagPw && flagEmail && flagPolicy)) {
            $joinUs.setAttribute('disabled', 'true');
            $joinUs.classList.remove('clickable');
            return;
          }
        }
        function isPolicyAgree(e) {
          if ($privacy.checked && $siteUse.checked && $joinAge.checked) {
            flagPolicy = true;
            btnAble();
          } else {
            flagPolicy = false;
            btnAble();
          }
          if($privacy.checked && $siteUse.checked && $joinAge.checked && $marketing.checked) {
            $policyAll.checked = true;
          } else {
            $policyAll.checked = false;
          }
        }
        function clearValue(e) {
          let val = e.target;
          console.log(val)
          if (val.previousElementSibling === $pwCheck) {
            val.nextElementSibling.textContent = "";
          } else {
            val.nextElementSibling.textContent = "필수 입력사항입니다.";
          }
          val.style.display = "none";
          val.previousElementSibling.focus();
          val.previousElementSibling.value = '';
          val.nextElementSibling.classList.remove('cor');
          val.nextElementSibling.classList.add('err');
        }
        function pwVisible(e){
          let val = e.target;
          val.style.display = "none"
          val.previousElementSibling.style.display = "block"
          val.nextElementSibling.setAttribute('type', 'text');
        }
        function pwVisibleOff(e){
          let val = e.target;
          val.nextElementSibling.nextElementSibling.setAttribute('type', 'password');
          val.style.display = "none"
          val.nextElementSibling.style.display = "block"
        }
      
        $userId.addEventListener('input', (e) => {
          let val = e.target.value;
          if(val) {
            $idClear.style.display = "block"; 
          } else {
            $idClear.style.display = "none";
          }

          if(ptnId.test(val)) { // 유효성 검사 통과
            $errId.classList.remove('err')
            $errId.classList.add('cor')
            $errId.textContent = '사용 가능한 아이디입니다.'
            flagId = true;
            btnAble();
            return;
          }
          if(!ptnId.test(val)) {
            $errId.classList.remove('cor')
            $errId.classList.add('err')
            $errId.textContent = '영문, 숫자 5-11.2'
            flagId = false;
            return;
          } 
          if (val.length < 5) {
            $errId.classList.remove('cor')
            $errId.classList.add('err')
            $errId.textContent = '영문, 숫자 5-11.1'
            flagId = false;
            return;
          }
        });
        $userId.addEventListener('blur', (e) => {
          let val = e.target.value;
          console.log('val2'+val);
          if(ptnId.test(val)) { // 유효성 검사 통과
            $errId.classList.remove('err')
            $errId.classList.add('cor')
            $errId.textContent = '사용 가능한 아이디입니다.'
            flagId = true;
            btnAble();
            return;
          }
          if (!val) {
            // $errId.textContent = '필수 입력사항입니다.'
            flagId = false;
            return;
          }       
          if (!ptnId.test(val)) {
            $errId.classList.remove('cor')
            $errId.textContent = '영문, 숫자 5-11.'
            flagId = false;
            return;
          }
        });
        $userPw.addEventListener('input', (e) => {
          let val = e.target.value;
          if(val) {
            $pwClear.style.display = "block"; 
          } else {
            $pwClear.style.display = "none";
          }
          if (ptnPw.test(val)) {
            $errPw.textContent = '';
            flagPw = true;
            return;
          }
          if (!ptnPw.test(val)) {
            $errPw.textContent = '8~30자 이내로 입력해 주십시오.';
            flagPw = false;
            return;
          }
        });
        $userPw.addEventListener('blur', (e) => {
          let val = e.target.value;
          if (!val) { 
            // $errPw.textContent = '필수 입력사항입니다.';
            flagPw = false;
            return;
          }
          if (val && val !== $pwCheck.value) {
            // $pwCheckMsg.textContent = '비밀번호가 일치하지 않습니다.1';
            flagPw = false;
          } else { // 유효성 검사 통과
            $pwCheckMsg.textContent = '';
            flagPw = true;
          }
        });
        $pwCheck.addEventListener('input', (e) => {
          let val = e.target.value;
          if(val) {
            $checkClear.style.display = "block"; 
            if (val !== $userPw.value) {
              $pwCheckMsg.textContent = '비밀번호가 일치하지 않습니다.';
              flagPw = false;
            } else { // 유효성 검사 통과
              $pwCheckMsg.textContent = '';
              flagPw = true;
              btnAble();
            }
          } else {
            $checkClear.style.display = "none";
          }
        });
        // $pwCheck.addEventListener('blur', (e) => {
        //   let val = e.target.value;
        //   console.log(val);
          
        // });
        $userEmail.addEventListener('blur', (e) => {
          if (!e.target.value) {
            $errEmail.textContent = '필수 입력사항입니다.1'
            flagEmail = false;

          }
        });
        $userEmail.addEventListener('input', (e) => {
          let val = e.target.value;
          if(val) {
            $emailClear.style.display = "block"; 
          } else {
            $emailClear.style.display = "none";
          }
          if (!ptnEmail.test(val)) {
            $errEmail.textContent = '이메일 주소가 올바르지 않습니다.'
            flagEmail = false;
            return;
          } else { // 유효성 검사 통과
            $errEmail.textContent = ''
            flagEmail = true;
            btnAble();
          }
        });
        $policyAll.addEventListener('click', (e) => {
          checkboxes.forEach((checkbox) => {
            checkbox.checked = $policyAll.checked;
          });
          if ($privacy.checked && $siteUse.checked && $joinAge.checked) {
            flagPolicy = true;
            btnAble();
          } else {
            flagPolicy = false;
            btnAble();
            // btnAble();
          }
        });

        $joinAge.addEventListener('click', isPolicyAgree);
        $privacy.addEventListener('click', isPolicyAgree);
        $siteUse.addEventListener('click', isPolicyAgree);
        $marketing.addEventListener('click', isPolicyAgree)
        $idClear.addEventListener('click', clearValue);
        $pwClear.addEventListener('click', clearValue);
        $checkClear.addEventListener('click', clearValue);
        $pwVisible.addEventListener('click',pwVisible);
        $checkVisible.addEventListener('click',pwVisible);
        $pwVisibleOff.addEventListener('click',pwVisibleOff);
        $checkVisibleOff.addEventListener('click',pwVisibleOff);
        $emailClear.addEventListener('click', clearValue);

        </script>
    
    <!-- FOOTER -->
    <div class="footer_wrap">
      <footer id="footer" class="footer">
        
        <h2 class="logo_footer">사이트 이용안내</h2>
        
        <div class="policy_introduce">
          
          <div class="flex_box">
            <p class="name_company">법인명(상호): 언더70</p>
            <p class="ceo">대표자(성명): 한승열</p>
            <p class="number_biz">사업자 등록번호 안내 : [123-04-00567]</p>
            <p class="info_biz">통신판매업 신고 제2022-서울성북-00830호 [사업자정보확인]</p>
          </div>
          <div class="flex_box">
            <p class="cel_num">전화 : 010-3466-5376</p>
            <adress clas="adress">주소 : 02844 서울특별시 성북구 동선동3가 234 성지관 401호</adress>
          </div>
          <p class="info_admin">개인정보관리책임자 : 한승열(hsl0717@naver.com)</p>
          <p class="contact_email">Contact : hsl0717@naver.com for more information</p>
          
        </div>

        <p class="copy">Copyrights &copy; 2022 언더70. All rights reserved.</p>
    
      </footer>
      

    </div>
  </div>
</body>

</html>